---
title: "10-import"
output: html_notebook
---

## Load the libraries

Library list: 

```{r libraries_list, eval=FALSE}
library(readr)
library(rjson)
library(janitor)
library(assertr)
library(tidyverse)
library(lubridate)
library(glue)
library(scales)
```

## Load data

Now we can import the dataset and clean the names first.

```{r import data}
USvideos <- read_csv("data/USvideos.csv") %>%
  clean_names()
```

Now import the category name from JSON file.
```{r}
category_id = fromJSON(file = "data/US_category_id.json",  unexpected.escape = "error")
```

## Overview

For the operation in the future, having a overview can help us understand the dataset easily.

```{r overview}
dim(USvideos)
str(USvideos)
```

As we can see, there are 16 variables and 40949 observations in the original data. 

Variables | description
---|---
**video_id** | A unique string for each observation to identify the different videos.
**trending_date** | The date that each video be define as a trending video (appeared in  [top trending videos](https://www.youtube.com/feed/trending) page ).
**title** | The title of the video.
**channel_title** | The channel title that created by youtubers themselves.
**category_id** | The catebory number of each video where it was posted. If you need the name of each catebory, please check the JSON file.
**publish_time** | The excect time when youtuber posted the video.
**tags** | The tags youtuber defined for each video.
**views** | The number of views.
**likes** | The number of likes.
**dislikes** | The number of dislikes.
**comment_count** | The number of comments.
**thumbnail_link** | The thumbnail of each video cover.
**comments_disabled** | Viewers can comment or not.
**ratings_disabled** | viewers can rate the video or not.
**video_error_or_removed** | The video was removed or not.
**description** | The description of each video, created by youtubers.





## Assert outlier

Now we need to make sure is there any outlier or mistake in the dataset.


### Assert category_id

First, test the column called "category_id". There are 43 categories, therefore the values in the column should not be bigger than 43 or smaller than 1.

```{r assert category}
assert(data = USvideos, in_set(1, 43, allow.na = FALSE), category_id) 
```

There are 5 rows have *NA* in this column, we can just remove them later.

### Assert numerical columns

For the numerical columns in the dataset, based on the reality, all of them should be positive.

```{r assert positive number}
assert(data = USvideos, within_bounds(lower.bound = 0, upper.bound = Inf, allow.na = FALSE), views)
assert(data = USvideos, within_bounds(lower.bound = 0,upper.bound = Inf, allow.na = FALSE), likes)
assert(data = USvideos, within_bounds(lower.bound = 0, upper.bound = Inf, allow.na = FALSE), dislikes)
assert(data = USvideos, within_bounds(lower.bound = 0, upper.bound = Inf, allow.na = FALSE), comment_count)
```

Fortunately, all of the numbers are positive. There is no mistake.

### Aassert logical columns

And for the logical columns, all of the values should be TRUE or FALSE.

```{r assert logical}
assert(data = USvideos, in_set(TRUE, FALSE, allow.na = FALSE), comments_disabled)
assert(data = USvideos, in_set(TRUE, FALSE, allow.na = FALSE), ratings_disabled)
assert(data = USvideos, in_set(TRUE, FALSE, allow.na = FALSE), video_error_or_removed) 
```

And there is no error too.


## Clean the data. 

### Remove *NA*

Because there are only several observations with NA values, we can just remove all of the rows which have NA value.
```{r remove NA}
USvideos_NNA <- as.data.frame(na.omit(USvideos))
USvideos_NNA
```

### Convert date column

Then we need to convert the column called "trending_date" with character type to normal date format in "lubridate" package.

```{r comvert to lubridate}
USvideos_NNA <- USvideos_NNA %>%
  mutate(trending_date = ydm(trending_date))
```


## Result overview

Now let's look through the structure of dataset again.

```{r result overview}
str(USvideos_NNA)
```


